---
import ButtonNav from './ButtonNav.astro'
---

<header class="w-full h-[80px] fixed top-0 bg-black z-[2] flex items-center">
  <ul class="w-full h-[40px] flex items-center pr-[300px]
  thirdq:pr-[100px]">
    <li class="p-[8px] w-[300px] h-full flex justify-center">
      <ButtonNav>
        <span id="span-button" class="translate-x-[-20px] text-[#AB966F] transition-all duration-500 ease-out">Explorar</sp>
      </ButtonNav>
    </li>
    <li class="flex flex-grow justify-center items-center gap-[80px]
    thirdq:gap-[50px]">
      <a id="navigateEndpoint" class="bg-[#AB966F] bg-opacity-20 rounded-md text-[#AB966F] p-[6px] cursor-pointer hover:underline
      thirdq:p-[3px] thirdq:w-fit" href="#Endpoint">Endpoint</a>
      <a class="bg-[#AB966F] bg-opacity-20 rounded-md text-[#AB966F] p-[6px] cursor-pointer hover:underline
      thirdq:p-[3px] thirdq:w-fit" href="/mock">Prueba Fetching</a>
      <a id="navigateAbout" class="bg-[#AB966F] bg-opacity-20 rounded-md text-[#AB966F] p-[6px] cursor-pointer hover:underline
      thirdq:p-[3px] thirdq:w-fit" href="#Intro">Sobre FromSoftware</a>
    </li>
  </ul>
</header>

<script>
  let pathname = window.location.pathname
  const navigateEndpoint = document.getElementById('navigateEndpoint')
  const navigateAbout = document.getElementById('navigateAbout')

  if (pathname === '/mock') {
    navigateEndpoint.setAttribute('href', '/')
  } else {
    navigateEndpoint.setAttribute('href', '#Endpoint')
  }

  const handleTransition = (event, button) => {
    event.preventDefault()
    const targetId = button.getAttribute('href')
    const targetElement = document.querySelector(targetId)
    if (targetElement instanceof HTMLElement) {
      window.scrollTo({ top: targetElement.offsetTop - 80, behavior: 'smooth' })
    }
  }
  navigateEndpoint.addEventListener('click', () => {
    pathname = window.location.pathname
    if (pathname === '/mock') {
      navigateEndpoint.setAttribute('href', '/')
    } else {
      navigateEndpoint.setAttribute('href', '#Endpoint')
      handleTransition(event, navigateEndpoint)
    }
  })
  navigateAbout.addEventListener('click', () => {
    if (pathname === '/mock') {
    navigateAbout.setAttribute('href', '/')
  } else {
    navigateAbout.setAttribute('href', '#About')
    handleTransition(event, navigateAbout)
  }
  })
</script>